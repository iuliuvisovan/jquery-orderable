function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints}if("undefined"==typeof jQuery)throw new Error("jQuery Orderable: I require jQuery to work! Make sure you load me after jQuery.");!function(){function e(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),t}e.prototype=window.Event.prototype,window.CustomEvent=e}(),+function(e){e.fn.orderable=function(n){function t(n,t){if("undefined"==typeof n||!n.length)throw new Error("jQuery Ordable: Supplied table doesn't exist!");if(!e(n).is("table"))throw new Error("jQuery Orderable: I work on <table> delements only. Supplied element: "+n.tagName);e(n).addClass(m.ORDERABLE).attr("ondragstart","return false;"),e(n).find(t.unit).addClass(m.ORDERABLE_UNIT),e(document).on({mouseenter:function(){e(".jq-orderable .hovered").removeClass("hovered"),e(this).addClass("hovered")}},".jq-orderable.reordering "+t.unit),e(document).on("touchmove mousemove",function(n){n.changedTouches||n.originalEvent.changedTouches?(n.changedTouches&&(E=n.changedTouches[n.changedTouches.length-1].pageY),n.originalEvent.changedTouches&&(E=n.originalEvent.changedTouches[n.originalEvent.changedTouches.length-1].pageY)):E=n.pageY,e(".moving")[0]&&(n.preventDefault(),l())}),c("onInit"),document.dispatchEvent(new CustomEvent(b.initiated))}function r(n){if(isTouchDevice()&&h.useHandlerOnTouch===!0)var t=".jq-orderable "+h.unit+":not(.orderable-exclude) td:not(.orderable-exclude) .touch-move-row";else var t=".jq-orderable "+h.unit+":not(.orderable-exclude) td:not(.orderable-exclude)";e(e(n.target).closest(isTouchDevice()&&h.useHandlerOnTouch===!0?".touch-move-row":"td")).is(t)&&(!e(".touch-move-row").length&&h.useHandlerOnTouch===!0&&console.error("jQuery Orderable: 'useHandlerOnTouch' is set to true but no drag handlers were found! Use the '.touch-move-row' class to mark an element as a handler."),$draggedUnit=e(n.target).parents(h.unit)[0],o(),e($draggedUnit).parents("table").addClass(m.REORDERING),e($draggedUnit).css({top:$draggedUnit.getBoundingClientRect().top,left:$draggedUnit.getBoundingClientRect().left,width:e($draggedUnit).width()}),e($draggedUnit).addClass(m.MOVING),e($draggedUnit).find("tr:visible").addClass("orderable-row-as-table"),l(),c("onOrderStart"),document.dispatchEvent(new CustomEvent(b.ORDERING_STARTED)))}function o(){var n=e(h.unit,g).first();v=e(n).clone(),v.find("td").empty(),v.addClass("orderable-ghost").css("display","").css("background","").insertBefore(n)}function d(n){if(e("."+m.MOVING).length){var t=e("."+m.MOVING)[0].getBoundingClientRect(),r=t.left+20,o=t.top,d=t.bottom,s=i(r,o);if(!a(s)){var l=i(r,d);if(!a(l))return u(),c("onOrderCancel"),void document.dispatchEvent(new CustomEvent(b.ORDERING_CANCELLED))}l?e(l).is(".orderable-ghost")?e($draggedUnit).insertAfter(l):e($draggedUnit).insertAfter(l):e($draggedUnit).insertAfter(s),e($draggedUnit).addClass("added"),setTimeout(function(){e($draggedUnit).removeClass("added")},1e3),u(),c("onOrderFinish"),document.dispatchEvent(new CustomEvent(b.ORDERING_FINISHED,{detail:$draggedUnit}))}}function a(n){return e(n).is(h.unit)&&!e(n).parent("thead").length&&e(n).parents(".jq-orderable").length}function i(n,t){var r=document.elementFromPoint(n,t);return e(r).is("tr")||e(r).is("tbody")||(r=e(r).parents(h.unit)),e(r).is("tbody")?r:e(r).is("tr")?"tbody"==h.unit?r.parentElement:r:void 0}function u(){s([m.MOVING,m.REORDERING,m.HOVERED,"orderable-row-as-table"]),v.remove()}function s(n){var n=n.constructor===Array?n:[n];n.forEach(function(n){e("."+n).removeClass(n)})}function l(){var n=e(".moving")[0].getBoundingClientRect(),t=n.left+20,r=n.top,o=i(t,r);e(".hovered").removeClass("hovered"),e(o).addClass("hovered"),e(".moving").css({top:E-15})}function c(e){h[e]&&(h[e].constructor!==Function?console.error("jQuery Orderable: Supplied value for '"+e+"' is not a function."):h[e]($draggedUnit||void 0))}var g=this;n=n||{};var h={unit:n.useTbodyAsUnit?"tbody":"tbody tr",useHandlerOnTouch:n.useHandlerOnTouch||!1,onLoad:n.onLoad,onInit:n.onInit,onOrderStart:n.onOrderStart,onOrderCancel:n.onOrderCancel,onOrderFinish:n.onOrderFinish};$draggedUnit={};var v,E,f={MOUSEDOWN:"mousedown touchstart",MOUSEUP:"mouseup touchend"},m={ORDERABLE:"jq-orderable",ORDERABLE_UNIT:"jq-orderable-unit",MOVING:"moving",HOVERED:"hovered",REORDERING:"reordering"},b={LOADED:"jquery.orderable.load",INITIATED:"jquery.orderable.init",ORDERING_STARTED:"jquery.orderable.order.start",ORDERING_CANCELLED:"jquery.orderable.order.cancel",ORDERING_FINISHED:"jquery.orderable.order.finish"};return c("onLoad"),document.dispatchEvent(new CustomEvent(b.LOADED)),t(this,h),e(document).on(f.MOUSEDOWN,r),e(document).on(f.MOUSEUP,d),this}}(jQuery);