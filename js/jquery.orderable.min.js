function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints}if("undefined"==typeof jQuery)throw new Error("jQuery Orderable: I require jQuery to work! Make sure you load me after jQuery.");!function(){function e(e,r){r=r||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,r.bubbles,r.cancelable,r.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),+function(e){e.fn.orderable=function(r){function n(r,n){if("undefined"==typeof r||!r.length)throw new Error("jQuery Ordable: Supplied table doesn't exist!");if(!e(r).is("table"))throw new Error("jQuery Orderable: I work on <table> delements only. Supplied element: "+r.tagName);e(r).addClass(O.ORDERABLE).attr("ondragstart","return false;"),e(r).find(n.unit).addClass(O.ORDERABLE_UNIT),e(document).on({mouseenter:function(){e(".jq-orderable .hovered").removeClass("hovered"),e(this).addClass("hovered")}},".jq-orderable.reordering "+n.unit),e(document).on("touchmove mousemove",function(r){r.changedTouches||r.originalEvent.changedTouches?(r.changedTouches&&(v=r.changedTouches[r.changedTouches.length-1].pageY),r.originalEvent.changedTouches&&(v=r.originalEvent.changedTouches[r.originalEvent.changedTouches.length-1].pageY)):v=r.pageY,e(".moving")[0]&&(r.preventDefault(),l())}),c("onInit"),document.dispatchEvent(new CustomEvent(m.INITIATED))}function t(r){if(isTouchDevice()&&h.useHandlerOnTouch===!0)var n=".jq-orderable "+h.unit+":not(.orderable-exclude) td:not(.orderable-exclude) .touch-move-row";else var n=".jq-orderable "+h.unit+":not(.orderable-exclude) td:not(.orderable-exclude)";e(e(r.target).closest(isTouchDevice()&&h.useHandlerOnTouch===!0?".touch-move-row":"td")).is(n)&&(!e(".touch-move-row").length&&h.useHandlerOnTouch===!0&&console.error("jQuery Orderable: 'useHandlerOnTouch' is set to true but no drag handlers were found! Use the '.touch-move-row' class to mark an element as a handler."),$draggedUnit=e(r.target).parents(h.unit)[0],e($draggedUnit).parents("table").addClass(O.REORDERING),o(),e($draggedUnit).css({top:$draggedUnit.getBoundingClientRect().top,left:$draggedUnit.getBoundingClientRect().left,width:e($draggedUnit).width()}),e($draggedUnit).addClass(O.MOVING),e($draggedUnit).find("tr:visible").addClass("orderable-row-as-table"),l(),c("onOrderStart"),document.dispatchEvent(new CustomEvent(m.ORDERING_STARTED)))}function o(){var r=e(h.unit+":visible:not(:empty)",g).first();E=e(r).clone(),E.find("td").empty(),E.addClass("orderable-ghost").css("display","").css("background","").insertBefore(r)}function d(r){if(e("."+O.MOVING).length){var n=e("."+O.MOVING)[0].getBoundingClientRect(),t=n.left+20,o=n.top,d=n.bottom,s=i(t,o);if(!a(s)){var l=i(t,d);if(!a(l))return u(),c("onOrderCancel"),void document.dispatchEvent(new CustomEvent(m.ORDERING_CANCELLED))}var g=e($draggedUnit).prevAll(h.unit+":not(.orderable-ghost):visible")[0];l?e(l).is(".orderable-ghost")?e($draggedUnit).insertAfter(l):e($draggedUnit).insertAfter(l):e($draggedUnit).insertAfter(s),e($draggedUnit).addClass("added"),setTimeout(function(){e($draggedUnit).removeClass("added")},1e3),u(),e($draggedUnit).prevAll(h.unit+":not(.orderable-ghost):visible")[0]!==g&&(c("onOrderReorder"),document.dispatchEvent(new CustomEvent(m.ORDERING_REORDERED,{detail:$draggedUnit}))),c("onOrderFinish"),document.dispatchEvent(new CustomEvent(m.ORDERING_FINISHED,{detail:$draggedUnit}))}}function a(r){return e(r).is(h.unit)&&!e(r).parent("thead").length&&e(r).parents(".jq-orderable").length}function i(r,n){var t=document.elementFromPoint(r,n);return e(t).is("tr")||e(t).is("tbody")||(t=e(t).parents(h.unit)),e(t).is("tbody")?t:e(t).is("tr")?"tbody"==h.unit?t.parentElement:t:void 0}function u(){s([O.MOVING,O.REORDERING,O.HOVERED,"orderable-row-as-table"]),E.remove()}function s(r){var r=r.constructor===Array?r:[r];r.forEach(function(r){e("."+r).removeClass(r)})}function l(){var r=e(".moving")[0].getBoundingClientRect(),n=r.left+20,t=r.top,o=i(n,t);e(".hovered").removeClass("hovered"),e(o).addClass("hovered"),e(".moving").css({top:v-15})}function c(e){h[e]&&(h[e].constructor!==Function?console.error("jQuery Orderable: Supplied value for '"+e+"' is not a function."):h[e]($draggedUnit||void 0))}var g=this;r=r||{};var h={unit:r.useTbodyAsUnit?"tbody":"tbody tr",useHandlerOnTouch:r.useHandlerOnTouch||!1,onLoad:r.onLoad,onInit:r.onInit,onOrderStart:r.onOrderStart,onOrderCancel:r.onOrderCancel,onOrderFinish:r.onOrderFinish,onOrderReorder:r.onOrderReorder};$draggedUnit={};var E,v,b={MOUSEDOWN:"mousedown touchstart",MOUSEUP:"mouseup touchend"},O={ORDERABLE:"jq-orderable",ORDERABLE_UNIT:"jq-orderable-unit",MOVING:"moving",HOVERED:"hovered",REORDERING:"reordering"},m={LOADED:"jquery.orderable.load",INITIATED:"jquery.orderable.init",ORDERING_STARTED:"jquery.orderable.order.start",ORDERING_CANCELLED:"jquery.orderable.order.cancel",ORDERING_FINISHED:"jquery.orderable.order.finish",ORDERING_REORDERED:"jquery.orderable.order.finish.reorder"};return c("onLoad"),document.dispatchEvent(new CustomEvent(m.LOADED)),n(this,h),e(document).on(b.MOUSEDOWN,t),e(document).on(b.MOUSEUP,d),this}}(jQuery);